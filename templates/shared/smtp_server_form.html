{% extends "shared/generic/generic_form.html" %}
{% load i18n %}

{% block breadcrumb_extra %}
<span>/</span>
<a href="{% url 'shared:smtp_servers' %}">{% trans "SMTP Servers" %}</a>
<span>/</span>
<span>{{ form_title }}</span>
{% endblock %}

{% block form_sections %}
<div class="form-section">
  <h3>{% trans "Basic Information" %}</h3>
  
  <div class="form-row">
    <div class="form-field">
      <label for="{{ form.name.id_for_label }}">
        {{ form.name.label }} *
      </label>
      {{ form.name }}
      {% if form.name.errors %}
        <span class="error">{{ form.name.errors.0 }}</span>
      {% endif %}
      {% if form.name.help_text %}
        <small class="form-text">{{ form.name.help_text }}</small>
      {% endif %}
    </div>
    
    <div class="form-field">
      <label for="{{ form.is_enabled.id_for_label }}">
        {{ form.is_enabled.label }}
      </label>
      {{ form.is_enabled }}
    </div>
  </div>
</div>

<div class="form-section">
  <h3>{% trans "SMTP Connection Settings" %}</h3>
  
  <div class="form-row">
    <div class="form-field">
      <label for="{{ form.host.id_for_label }}">
        {{ form.host.label }} *
      </label>
      {{ form.host }}
      {% if form.host.errors %}
        <span class="error">{{ form.host.errors.0 }}</span>
      {% endif %}
      {% if form.host.help_text %}
        <small class="form-text">{{ form.host.help_text }}</small>
      {% endif %}
    </div>
    
    <div class="form-field">
      <label for="{{ form.port.id_for_label }}">
        {{ form.port.label }} *
      </label>
      {{ form.port }}
      {% if form.port.errors %}
        <span class="error">{{ form.port.errors.0 }}</span>
      {% endif %}
      {% if form.port.help_text %}
        <small class="form-text">{{ form.port.help_text }}</small>
      {% endif %}
    </div>
  </div>

  <div class="form-row">
    <div class="form-field">
      <label for="{{ form.use_tls.id_for_label }}">
        {{ form.use_tls.label }}
      </label>
      {{ form.use_tls }}
      {% if form.use_tls.help_text %}
        <small class="form-text">{{ form.use_tls.help_text }}</small>
      {% endif %}
    </div>
    
    <div class="form-field">
      <label for="{{ form.use_ssl.id_for_label }}">
        {{ form.use_ssl.label }}
      </label>
      {{ form.use_ssl }}
      {% if form.use_ssl.help_text %}
        <small class="form-text">{{ form.use_ssl.help_text }}</small>
      {% endif %}
    </div>
    
    <div class="form-field">
      <label for="{{ form.timeout.id_for_label }}">
        {{ form.timeout.label }}
      </label>
      {{ form.timeout }}
      {% if form.timeout.help_text %}
        <small class="form-text">{{ form.timeout.help_text }}</small>
      {% endif %}
    </div>
  </div>
</div>

<div class="form-section">
  <h3>{% trans "Authentication" %}</h3>
  
  <div class="form-row">
    <div class="form-field">
      <label for="{{ form.username.id_for_label }}">
        {{ form.username.label }} *
      </label>
      {{ form.username }}
      {% if form.username.errors %}
        <span class="error">{{ form.username.errors.0 }}</span>
      {% endif %}
      {% if form.username.help_text %}
        <small class="form-text">{{ form.username.help_text }}</small>
      {% endif %}
    </div>
    
    <div class="form-field">
      <label for="{{ form.password.id_for_label }}">
        {{ form.password.label }} *
      </label>
      {{ form.password }}
      {% if form.password.errors %}
        <span class="error">{{ form.password.errors.0 }}</span>
      {% endif %}
      {% if form.password.help_text %}
        <small class="form-text">{{ form.password.help_text }}</small>
      {% endif %}
      {% if object and object.pk %}
        <small class="form-text">{% trans "Leave blank to keep current password" %}</small>
      {% endif %}
    </div>
  </div>
</div>

<div class="form-section">
  <h3>{% trans "Email Settings" %}</h3>
  
  <div class="form-row">
    <div class="form-field">
      <label for="{{ form.from_email.id_for_label }}">
        {{ form.from_email.label }} *
      </label>
      {{ form.from_email }}
      {% if form.from_email.errors %}
        <span class="error">{{ form.from_email.errors.0 }}</span>
      {% endif %}
      {% if form.from_email.help_text %}
        <small class="form-text">{{ form.from_email.help_text }}</small>
      {% endif %}
    </div>
    
    <div class="form-field">
      <label for="{{ form.from_name.id_for_label }}">
        {{ form.from_name.label }}
      </label>
      {{ form.from_name }}
      {% if form.from_name.help_text %}
        <small class="form-text">{{ form.from_name.help_text }}</small>
      {% endif %}
    </div>
  </div>
</div>

<div class="form-section">
  <h3>{% trans "Additional Information" %}</h3>
  
  <div class="form-row">
    <div class="form-field full-width">
      <label for="{{ form.description.id_for_label }}">
        {{ form.description.label }}
      </label>
      {{ form.description }}
      {% if form.description.help_text %}
        <small class="form-text">{{ form.description.help_text }}</small>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}

{% block form_actions_extra %}
<a href="{% url 'shared:smtp_servers' %}" class="btn btn-secondary">{% trans "Cancel" %}</a>
{% endblock %}
