{% extends "base.html" %}
{% load i18n %}

{% block title %}ูุงุญุฏูุง ุณุงุฒูุงู - {{ block.super }}{% endblock %}

{% block content %}
<div class="inventory-module">
  <div class="module-header">
    <nav class="breadcrumb">
      <a href="{% url 'ui:dashboard' %}">ุฏุงุดุจูุฑุฏ</a>
      <span>/</span>
      <span>ูุงุญุฏูุง ุณุงุฒูุงู</span>
    </nav>
    <h1 class="page-title">ูุงุญุฏูุง ุณุงุฒูุงู</h1>
    <div class="page-actions">
      <button class="btn btn-secondary" onclick="window.print()">ฺุงูพ</button>
      <a href="{% url 'shared:company_unit_create' %}" class="btn btn-primary">ุงุฌุงุฏ ูุงุญุฏ ุฌุฏุฏ</a>
    </div>
  </div>

  <div class="filter-panel">
    <h3>ููุชุฑ ู ุฌุณุชุฌู</h3>
    <form method="get" class="filter-form">
      <div class="filter-row">
        <div class="filter-field">
          <label for="search">ุฌุณุชุฌู</label>
          <input type="text" id="search" name="search" placeholder="ุฌุณุชุฌู ุจุฑ ุงุณุงุณ ฺฉุฏ ุง ูุงู" value="{{ filters.search }}">
        </div>
        <div class="filter-field">
          <label for="status">ูุถุนุช</label>
          <select id="status" name="status">
            <option value="">-- ููู --</option>
            <option value="1" {% if filters.status == "1" %}selected{% endif %}>ูุนุงู</option>
            <option value="0" {% if filters.status == "0" %}selected{% endif %}>ุบุฑูุนุงู</option>
          </select>
        </div>
        <div class="filter-actions">
          <button type="submit" class="btn btn-primary">ุงุนูุงู ููุชุฑ</button>
          <a href="{% url 'shared:company_units' %}" class="btn btn-secondary">ุญุฐู ููุชุฑ</a>
        </div>
      </div>
    </form>
  </div>

  {% if units %}
  <table class="data-table">
    <thead>
      <tr>
        <th>ฺฉุฏ</th>
        <th>ูุงู ูุงุญุฏ</th>
        <th>ูุงุญุฏ ุจุงูุงุฏุณุช</th>
        <th>ูุถุนุช</th>
        <th>ุนููุงุช</th>
      </tr>
    </thead>
    <tbody>
      {% for unit in units %}
      <tr>
        <td>{{ unit.public_code }}</td>
        <td>{{ unit.name }}</td>
        <td>{{ unit.parent_unit.name|default:"-" }}</td>
        <td>
          {% if unit.is_enabled %}
            <span class="badge badge-success">ูุนุงู</span>
          {% else %}
            <span class="badge badge-inactive">ุบุฑูุนุงู</span>
          {% endif %}
        </td>
        <td>
          <a href="{% url 'shared:company_unit_edit' unit.pk %}" class="btn btn-sm">ูุฑุงุด</a>
          <a href="{% url 'shared:company_unit_delete' unit.pk %}" class="btn btn-sm btn-danger">ุญุฐู</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if is_paginated %}
  <div class="pagination">
    {% if page_obj.has_previous %}
      <a href="?page=1" class="page-link">ุงููู</a>
      <a href="?page={{ page_obj.previous_page_number }}" class="page-link">ูุจู</a>
    {% endif %}

    <span class="page-info">
      ุตูุญู {{ page_obj.number }} ุงุฒ {{ page_obj.paginator.num_pages }}
    </span>

    {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}" class="page-link">ุจุนุฏ</a>
      <a href="?page={{ page_obj.paginator.num_pages }}" class="page-link">ุขุฎุฑู</a>
    {% endif %}
  </div>
  {% endif %}

  {% else %}
  <div class="empty-state">
    <div class="empty-icon">๐ข</div>
    <h3>ูฺ ูุงุญุฏ ุซุจุช ูุดุฏู ุงุณุช</h3>
    <p>ุจุฑุง ุดุฑูุนุ ุงููู ูุงุญุฏ ุณุงุฒูุงู ุฑุง ุซุจุช ฺฉูุฏ.</p>
    <a href="{% url 'shared:company_unit_create' %}" class="btn btn-primary">ุงุฌุงุฏ ูุงุญุฏ ุฌุฏุฏ</a>
  </div>
  {% endif %}
</div>
{% endblock %}
