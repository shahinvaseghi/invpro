{% extends "base.html" %}
{% load i18n %}
{% load static %}

{% block title %}{{ detail_title|default:"Details" }} - {{ block.super }}{% endblock %}

{% block content %}
<div class="inventory-module">
  <div class="module-header">
    <nav class="breadcrumb">
      <a href="{% url 'ui:dashboard' %}">{% trans "Dashboard" %}</a>
      {% for crumb in breadcrumbs %}
        <span class="separator">/</span>
        {% if crumb.url %}
          <a href="{{ crumb.url }}">{{ crumb.label }}</a>
        {% else %}
          <span>{{ crumb.label }}</span>
        {% endif %}
      {% endfor %}
      {% block breadcrumb_extra %}{% endblock %}
    </nav>
    
    <h1 class="page-title">{{ detail_title|default:"Details" }}</h1>
  </div>

  <div class="form-container">
    {% if info_banner %}
    <div class="info-banner">
      {% for item in info_banner %}
        <div>
          <strong>{{ item.label }}:</strong> 
          {% if item.type == 'code' %}
            <code>{{ item.value }}</code>
          {% elif item.type == 'badge' %}
            {% if item.value %}
              <span class="badge badge-active">{{ item.true_label|default:"Active" }}</span>
            {% else %}
              <span class="badge badge-inactive">{{ item.false_label|default:"Inactive" }}</span>
            {% endif %}
          {% elif item.type == 'date' %}
            {{ item.value|date:"Y-m-d" }}
          {% else %}
            {{ item.value|default:"-" }}
          {% endif %}
        </div>
      {% endfor %}
      {% block info_banner_extra %}{% endblock %}
    </div>
    {% endif %}

    {% if alert_message %}
    <div class="alert alert-{{ alert_type|default:'info' }}">
      {{ alert_message }}
    </div>
    {% endif %}

    {% block detail_sections %}
    {% if detail_sections %}
      {% for section in detail_sections %}
        <div class="form-section">
          <h3>{{ section.title }}</h3>
          {% if section.type == 'fields' or section.fields %}
            <div class="form-row">
              {% for field in section.fields %}
                <div class="form-field">
                  <label>{{ field.label }}</label>
                  <div class="readonly-field">
                    {% if field.type == 'code' %}
                      <code>{{ field.value }}</code>
                    {% elif field.type == 'badge' %}
                      {% if field.value %}
                        <span class="badge badge-active">{{ field.true_label|default:"Active" }}</span>
                      {% else %}
                        <span class="badge badge-inactive">{{ field.false_label|default:"Inactive" }}</span>
                      {% endif %}
                    {% elif field.type == 'link' and field.url %}
                      <a href="{{ field.url }}">{{ field.value }}</a>
                    {% else %}
                      {{ field.value|default:"-" }}
                    {% endif %}
                  </div>
                </div>
              {% endfor %}
            </div>
          {% elif section.type == 'table' %}
            {% if section.data %}
            <div class="data-table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    {% for header in section.headers %}
                      <th>{{ header }}</th>
                    {% endfor %}
                  </tr>
                </thead>
                <tbody>
                  {% for row in section.data %}
                    <tr>
                      {% for cell in row %}
                        <td>{{ cell|default:"-" }}</td>
                      {% endfor %}
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
            {% else %}
            <div class="alert alert-info">
              {% trans "No data available." %}
            </div>
            {% endif %}
          {% elif section.type == 'custom' %}
            {{ section.content|safe }}
          {% endif %}
        </div>
      {% endfor %}
    {% endif %}
    {% endblock %}

    <div class="form-actions">
      {% if list_url %}
        <a href="{{ list_url }}" class="btn btn-secondary">{% trans "Back to List" %}</a>
      {% endif %}
      {% if edit_url and can_edit %}
        <a href="{{ edit_url }}" class="btn btn-primary">{% trans "Edit" %}</a>
      {% endif %}
      {% if delete_url and can_delete %}
        <a href="{{ delete_url }}" class="btn btn-danger">{% trans "Delete" %}</a>
      {% endif %}
      {% block detail_actions_extra %}{% endblock %}
    </div>
  </div>
</div>

<link rel="stylesheet" href="{% static 'css/shared.css' %}">
{% endblock %}

