{% extends "shared/generic/generic_list.html" %}
{% load i18n %}

{% block filter_fields %}
<div class="form-group">
  <label for="search">{% trans "Search" %}</label>
  <input type="text" name="search" id="search" 
         placeholder="{% trans 'Group name' %}" 
         value="{{ request.GET.search }}"
         class="form-control">
</div>
<div class="form-group">
  <label for="status">{% trans "Status" %}</label>
  <select name="status" id="status" class="form-control">
    <option value="">-- {% trans "All" %} --</option>
    <option value="active" {% if status_filter_value == "active" %}selected{% endif %}>{% trans "Active" %}</option>
    <option value="inactive" {% if status_filter_value == "inactive" %}selected{% endif %}>{% trans "Inactive" %}</option>
  </select>
</div>
{% endblock %}

{% block table_headers %}
<th>{% trans "Name" %}</th>
<th>{% trans "Description" %}</th>
<th>{% trans "Access Levels" %}</th>
<th>{% trans "Members" %}</th>
<th>{% trans "Status" %}</th>
{% if show_actions %}
  <th>{% trans "Actions" %}</th>
{% endif %}
{% endblock %}

{% block table_rows %}
{% for group in object_list %}
<tr>
  <td>{{ group.name }}</td>
  <td>
    {% if group.profile and group.profile.description %}
      {{ group.profile.description }}
    {% else %}
      -
    {% endif %}
  </td>
  <td>
    {% if group.profile %}
      {% with levels=group.profile.access_levels.all %}
        {% if levels %}
          {{ levels|join:", " }}
        {% else %}
          -
        {% endif %}
      {% endwith %}
    {% else %}
      -
    {% endif %}
  </td>
  <td>
    {% with members=group.user_set.all %}
      {% if members %}
        {{ members|length }}
      {% else %}
        0
      {% endif %}
    {% endwith %}
  </td>
  <td>
    {% if group.profile and group.profile.is_enabled %}
      <span class="badge badge-active">{% trans "Active" %}</span>
    {% else %}
      <span class="badge badge-inactive">{% trans "Inactive" %}</span>
    {% endif %}
  </td>
  {% if show_actions %}
  <td>
    <a href="{% url edit_url_name group.pk %}" class="btn btn-secondary" style="padding: 4px 12px; font-size: 0.85rem;">
      {% trans "Edit" %}
    </a>
    <a href="{% url delete_url_name group.pk %}" class="btn btn-primary" style="padding: 4px 12px; font-size: 0.85rem;">
      {% trans "Delete" %}
    </a>
  </td>
  {% endif %}
</tr>
{% endfor %}
{% endblock %}
