{% extends "shared/generic/generic_list.html" %}
{% load i18n %}

{% block filter_fields %}
<div class="form-group">
  <label for="search">{% trans "Search" %}</label>
  <input type="text" name="search" id="search" 
         placeholder="{{ search_placeholder|default:'Search by name or code' }}" 
         value="{{ request.GET.search }}"
         class="form-control">
</div>
<div class="form-group">
  <label for="category">{% trans "Category" %}</label>
  <select name="category" id="category" class="form-control">
    <option value="">{% trans "All Categories" %}</option>
    {% for cat in categories %}
      <option value="{{ cat.pk }}" {% if request.GET.category == cat.pk|stringformat:"s" %}selected{% endif %}>{{ cat.name }}</option>
    {% endfor %}
  </select>
</div>
{% endblock %}

{% block table_headers %}
<th>{% trans "Code" %}</th>
<th>{% trans "Name" %}</th>
<th>{% trans "Category" %}</th>
<th>{% trans "Default Priority" %}</th>
<th>{% trans "Fields Count" %}</th>
<th>{% trans "Status" %}</th>
{% if show_actions %}
  <th>{% trans "Actions" %}</th>
{% endif %}
{% endblock %}

{% block table_rows %}
{% for template in object_list %}
<tr>
  <td><code>{{ template.template_code }}</code></td>
  <td><strong>{{ template.name }}</strong></td>
  <td>
    {% if template.category %}
      <a href="{% url 'ticketing:category_edit' template.category.pk %}">{{ template.category.name }}</a>
    {% else %}
      <span class="muted-text">–</span>
    {% endif %}
  </td>
  <td>
    {% if template.default_priority %}
      {{ template.default_priority.name }}
    {% else %}
      <span class="muted-text">–</span>
    {% endif %}
  </td>
  <td style="text-align: center;">
    <span class="badge">{{ template.fields.count }}</span>
  </td>
  <td>
    {% if template.is_enabled == 1 %}
      <span class="badge badge-active">{% trans "Active" %}</span>
    {% else %}
      <span class="badge badge-inactive">{% trans "Inactive" %}</span>
    {% endif %}
  </td>
  {% if show_actions %}
  <td>
    {% include 'shared/partials/row_actions.html' with object=template feature_code=feature_code detail_url_name=detail_url_name edit_url_name=edit_url_name delete_url_name=delete_url_name %}
  </td>
  {% endif %}
</tr>
{% endfor %}
{% endblock %}

{% block pagination %}
{% include 'shared/partials/pagination.html' %}
{% endblock %}
