{% extends "shared/generic/generic_list.html" %}
{% load i18n %}

{% block table_headers %}
<th>{% trans "Code" %}</th>
<th>{% trans "Name" %}</th>
<th>{% trans "Warehouse" %}</th>
<th>{% trans "Personnel" %}</th>
<th>{% trans "Machines" %}</th>
<th>{% trans "Status" %}</th>
{% if show_actions %}
  <th>{% trans "Actions" %}</th>
{% endif %}
{% endblock %}

{% block table_rows %}
{% for line in object_list %}
<tr>
  <td><code>{{ line.public_code }}</code></td>
  <td><strong>{{ line.name }}</strong></td>
  <td>{% if line.warehouse %}{{ line.warehouse.name }}{% else %}<span style="color: #9ca3af;">â€”</span>{% endif %}</td>
  <td>
    {% if line.personnel.exists %}
      <ul style="margin: 0; padding-right: 1.5rem; list-style: none;">
        {% for person in line.personnel.all|slice:":3" %}
        <li>{{ person.first_name }} {{ person.last_name }}</li>
        {% endfor %}
        {% if line.personnel.count > 3 %}
        <li><em>{% trans "and" %} {{ line.personnel.count|add:"-3" }} {% trans "more" %}</em></li>
        {% endif %}
      </ul>
    {% else %}
      <span style="color: #9ca3af;">â€”</span>
    {% endif %}
  </td>
  <td>
    {% if line.machines.exists %}
      <ul style="margin: 0; padding-right: 1.5rem; list-style: none;">
        {% for machine in line.machines.all|slice:":3" %}
        <li>{{ machine.name }}</li>
        {% endfor %}
        {% if line.machines.count > 3 %}
        <li><em>{% trans "and" %} {{ line.machines.count|add:"-3" }} {% trans "more" %}</em></li>
        {% endif %}
      </ul>
    {% else %}
      <span style="color: #9ca3af;">â€”</span>
    {% endif %}
  </td>
  <td>
    {% if line.is_enabled %}
      <span class="badge badge-active">{% trans "Active" %}</span>
    {% else %}
      <span class="badge badge-inactive">{% trans "Inactive" %}</span>
    {% endif %}
  </td>
  {% if show_actions %}
  <td>
    {% if edit_url_name %}
      <a href="{% url edit_url_name line.pk %}" class="btn btn-secondary" style="padding: 4px 12px; font-size: 0.85rem; margin-left: 0.25rem;">
        {% trans "Edit" %}
      </a>
    {% endif %}
    {% if delete_url_name %}
      <a href="{% url delete_url_name line.pk %}" class="btn btn-danger" style="padding: 4px 12px; font-size: 0.85rem; margin-left: 0.25rem;">
        {% trans "Delete" %}
      </a>
    {% endif %}
  </td>
  {% endif %}
</tr>
{% endfor %}
{% endblock %}

{% block empty_state_title %}{% trans "No Work Lines Found" %}{% endblock %}
{% block empty_state_message %}{% trans "Start by creating your first work line." %}{% endblock %}
{% block empty_state_icon %}ğŸ­{% endblock %}
