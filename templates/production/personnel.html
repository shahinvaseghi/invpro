{% extends "shared/generic/generic_list.html" %}
{% load i18n %}

{% block page_actions %}
<div class="page-actions">
  {% if create_url %}
    <button class="btn btn-secondary" onclick="window.print()">{% trans "Print" %}</button>
    <a href="{{ create_url }}" class="btn btn-primary">
      {{ create_button_text|default:"Create New" }}
    </a>
  {% endif %}
  {% block extra_actions %}{% endblock %}
</div>
{% endblock %}

{% block filter_fields %}
<div class="form-group">
  <label for="search">{% trans "Search" %}</label>
  <input type="text" name="search" id="search" 
         placeholder="{{ search_placeholder|default:'Search by code or name' }}" 
         value="{{ request.GET.search }}"
         class="form-control">
</div>
{% endblock %}

{% block table_rows %}
{% for person in object_list %}
<tr>
  <td><code>{{ person.public_code }}</code></td>
  <td>{{ person.first_name }} {{ person.last_name }}</td>
  <td>{{ person.national_id|default:"-" }}</td>
  <td>
    {% with units=person.company_units.all %}
      {% if units %}
        {{ units|join:", " }}
      {% else %}
        -
      {% endif %}
    {% endwith %}
  </td>
  <td>
    {% if person.is_enabled %}
      <span class="badge badge-success">{% trans "Active" %}</span>
    {% else %}
      <span class="badge badge-inactive">{% trans "Inactive" %}</span>
    {% endif %}
  </td>
  {% if show_actions %}
  <td>
    {% if edit_url_name %}
      <a href="{% url edit_url_name person.pk %}" class="btn btn-secondary" style="padding: 4px 12px; font-size: 0.85rem;">
        {% trans "Edit" %}
      </a>
    {% endif %}
    {% if delete_url_name %}
      <a href="{% url delete_url_name person.pk %}" class="btn btn-primary" style="padding: 4px 12px; font-size: 0.85rem;">
        {% trans "Delete" %}
      </a>
    {% endif %}
  </td>
  {% endif %}
</tr>
{% endfor %}
{% endblock %}
