{% extends "shared/generic/generic_list.html" %}
{% load i18n %}
{% load jalali_tags %}

{% block table_headers %}
<th>{% trans "Order Code" %}</th>
<th>{% trans "BOM" %}</th>
<th>{% trans "Finished Item" %}</th>
<th>{% trans "Quantity" %}</th>
<th>{% trans "Unit" %}</th>
<th>{% trans "Priority" %}</th>
<th>{% trans "Status" %}</th>
<th>{% trans "Approver" %}</th>
<th>{% trans "Order Date" %}</th>
{% if show_actions %}
  <th>{% trans "Actions" %}</th>
{% endif %}
{% endblock %}

{% block table_rows %}
{% for order in object_list %}
<tr>
  <td><code>{{ order.order_code }}</code></td>
  <td>{{ order.bom.bom_code|default:"-" }}</td>
  <td>
    <strong>{{ order.finished_item.item_code }}</strong><br>
    <small>{{ order.finished_item.name }}</small>
  </td>
  <td>{{ order.quantity_planned }}</td>
  <td>{{ order.unit }}</td>
  <td>
    <span class="badge badge-{{ order.priority }}">
      {{ order.get_priority_display }}
    </span>
  </td>
  <td>
    <span class="badge badge-{{ order.status }}">
      {{ order.get_status_display }}
    </span>
  </td>
  <td>{{ order.approved_by.get_full_name|default:order.approved_by.username|default:"-" }}</td>
  <td>{{ order.order_date|jalali_date }}</td>
  {% if show_actions %}
  <td>
    {% if edit_url_name %}
      <a href="{% url edit_url_name order.pk %}" class="btn btn-secondary" style="padding: 4px 12px; font-size: 0.85rem;">
        {% trans "Edit" %}
      </a>
    {% endif %}
    {% if delete_url_name %}
      <a href="{% url delete_url_name order.pk %}" class="btn btn-primary" style="padding: 4px 12px; font-size: 0.85rem;">
        {% trans "Delete" %}
      </a>
    {% endif %}
  </td>
  {% endif %}
</tr>
{% endfor %}
{% endblock %}
