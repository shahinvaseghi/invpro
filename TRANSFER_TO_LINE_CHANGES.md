# ุชุบุฑุงุช ุจุฎุด ุงูุชูุงู ุจู ูพุง ฺฉุงุฑ (Transfer to Line)

## ุชุงุฑุฎ: 2025-12-04

---

## ุจุฎุด ุงูู: ุชุบุฑ ุฏุฑ ููุทู ุงุฌุงุฏ ุณูุฏ ุงูุชูุงู

### ูุถุนุช ูุนู

**ุญุงูุช `transfer_type = 'full'`:**
- ฺฉ ุณูุฏ ุงูุชูุงู ุจุง ููู ููุงุฏ BOM ุงุฌุงุฏ ูโุดูุฏ
- ููู ููุงุฏ ุฏุฑ ฺฉ ุณูุฏ ุงูุชูุงู ูุฑุงุฑ ูโฺฏุฑูุฏ

**ุญุงูุช `transfer_type = 'operations'`:**
- ฺฉ ุณูุฏ ุงูุชูุงู ุจุง ููุงุฏ ููู ุนููุงุชโูุง ุงูุชุฎุงุจ ุงุฌุงุฏ ูโุดูุฏ
- ููู ููุงุฏ ุนููุงุชโูุง ุงูุชุฎุงุจ ุฏุฑ ฺฉ ุณูุฏ ุงูุชูุงู ูุฑุงุฑ ูโฺฏุฑูุฏ

### ุชุบุฑ ููุฑุฏ ูุงุฒ

**ุญุงูุช `transfer_type = 'full'`:**
- ุจุงุฏ **ููู ุนููุงุช** ุณูุงุฑุด ุดูุงุณุง ุดููุฏ
- ุจุฑุง **ูุฑ ุนููุงุช** ฺฉ ุณูุฏ ุงูุชูุงู **ุฌุฏุงฺฏุงูู** ุงุฌุงุฏ ุดูุฏ
- ูุฑ ุณูุฏ ุงูุชูุงู ููุท ุดุงูู ููุงุฏ ููุงู ุนููุงุช ุจุงุดุฏ

**ุญุงูุช `transfer_type = 'operations'`:**
- ุจุฑุง **ูุฑ ุนููุงุช ุงูุชุฎุงุจ** ฺฉ ุณูุฏ ุงูุชูุงู **ุฌุฏุงฺฏุงูู** ุงุฌุงุฏ ุดูุฏ
- ูุฑ ุณูุฏ ุงูุชูุงู ููุท ุดุงูู ููุงุฏ ููุงู ุนููุงุช ุจุงุดุฏ

### ุชูุงูุช ุจู ุฏู ุญุงูุช

- **`full`**: ููู ุนููุงุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุดูุงุณุง ูโุดููุฏ
- **`operations`**: ููุท ุนููุงุชโูุง ุงูุชุฎุงุจ ฺฉุงุฑุจุฑ ุงุณุชูุงุฏู ูโุดููุฏ

### ูุชุฌู ููุง

ุฏุฑ ูุฑ ุฏู ุญุงูุชุ ุจู ุฌุง ฺฉ ุณูุฏ ุงูุชูุงูุ ุจุงุฏ **ฺูุฏู ุณูุฏ ุงูุชูุงู** ุงุฌุงุฏ ุดูุฏ (ุจู ุชุนุฏุงุฏ ุนููุงุช).

---

## ุจุฎุด ุฏูู: ุงุฌุงุฏ ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง

### ูุงุฒููุฏ ฺฉู

ุจู ุงุฒุง **ูุฑ ุณูุฏ ุงูุชูุงู ุจู ูพุง ฺฉุงุฑ** ฺฉู ุงุฌุงุฏ ูโุดูุฏุ ุจุงุฏ ฺฉ **ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง** ูุฒ ุงุฌุงุฏ ุดูุฏ.

### ููุทู ุงูุชุฎุงุจ ุงูุจุงุฑ ูุจุฏุง

1. **ููุจุน ุงุทูุงุนุงุช:**
   - ูุฑ ฺฉุงูุง ุฏุฑ BOM ุฏุงุฑุง ฺฉ ุง ฺูุฏ ุงูุจุงุฑ ูุจุฏุง ุจุง ุงูููุช ุงุณุช (ุฏุฑ ููุฏ `source_warehouses` JSONField)
   - ุณุงุฎุชุงุฑ: `[{'warehouse_id': 1, 'warehouse_code': '001', 'priority': 1}, ...]`

2. **ุชุฑุชุจ ุงูุชุฎุงุจ:**
   - ุงูุชุฎุงุจ ุงูุจุงุฑ ูุจุฏุง ุจุงุฏ ุจุฑ ุงุณุงุณ **ุงูููุช ุงุฒ ฺฉู ุจู ุฒุงุฏ** ุจุงุดุฏ
   - ุนู ุงุจุชุฏุง ุงูููุช 1ุ ุณูพุณ ุงูููุช 2ุ ุณูพุณ ุงูููุช 3 ู ...
   - ุจุฑุง ูุฑ ฺฉุงูุง: ุงุฒ ุงูุจุงุฑ ุจุง ุงูููุช ูพุงูโุชุฑ ุดุฑูุน ูโฺฉูุฏ ู **ุงููู ุงูุจุงุฑ ฺฉู ููุฌูุฏ ฺฉุงู ุฏุงุฑุฏ** ุงูุชุฎุงุจ ูโุดูุฏ

3. **ุงูฺฏูุฑุชู ุงูุชุฎุงุจ:**
   ```
   ุจุฑุง ูุฑ ฺฉุงูุง ุฏุฑ ุณูุฏ ุงูุชูุงู:
     1. ูุณุช ุงูุจุงุฑูุง ูุจุฏุง ุฑุง ุจุฑ ุงุณุงุณ ุงูููุช ูุฑุชุจ ฺฉู (1ุ 2ุ 3...)
     2. ุงุฒ ุงูููุช 1 ุดุฑูุน ฺฉู
     3. ููุฌูุฏ ุงูุจุงุฑ ุฑุง ฺฺฉ ฺฉู
     4. ุงฺฏุฑ ููุฌูุฏ ฺฉุงู ุฏุงุดุช โ ุงู ุงูุจุงุฑ ุฑุง ุงูุชุฎุงุจ ฺฉู
     5. ุงฺฏุฑ ููุฌูุฏ ฺฉุงู ูุฏุงุดุช โ ุจู ุงูููุช ุจุนุฏ ุจุฑู
     6. ุงฺฏุฑ ูฺ ุงูุจุงุฑ ููุฌูุฏ ฺฉุงู ูุฏุงุดุช โ ุฎุทุง ุจุฏู
   ```

### ุงูุจุงุฑ ููุตุฏ

- **ููุจุน:** `operation.work_line.warehouse`
- **ุชูุถุญ:**
  - ูุฑ `ProcessOperation` ุฏุงุฑุง ฺฉ ููุฏ `work_line` (ForeignKey ุจู `WorkLine`) ุงุณุช
  - ูุฑ `WorkLine` ุฏุงุฑุง ฺฉ ููุฏ `warehouse` (ForeignKey ุจู `inventory.Warehouse`) ุงุณุช
  - ูพุณ ุงูุจุงุฑ ููุตุฏ = `operation.work_line.warehouse`

### ฺฺฉ ฺฉุฑุฏู ููุฌูุฏ

1. **ุชุงุจุน ูุญุงุณุจู ููุฌูุฏ:**
   - ุงุณุชูุงุฏู ุงุฒ `inventory.inventory_balance.calculate_item_balance()`
   - ูพุงุฑุงูุชุฑูุง: `company_id`, `warehouse_id`, `item_id`, `as_of_date` (ุงุฎุชุงุฑ)
   - ุฎุฑูุฌ: ุฏฺฉุดูุฑ ุดุงูู `current_balance` (ููุฌูุฏ ูุนู)

2. **ุจุฑุง ูุฑ ฺฉุงูุง:**
   - ุจุงุฏ ููุฌูุฏ ุงูุจุงุฑ ูุจุฏุง (ุจุฑ ุงุณุงุณ ุงูููุช) ฺฺฉ ุดูุฏ
   - ููุฏุงุฑ ููุฑุฏ ูุงุฒ = `quantity_required` ุฏุฑ `TransferToLineItem`
   - ููุงุณู: `current_balance >= quantity_required`

3. **ูุงููู ฺฉู:**
   - **ููุท ุฏุฑ ุตูุฑุช ุญูุงูู ุงุฌุงุฏ ุดูุฏ** ฺฉู **ููู ฺฉุงูุงูุง** ููุฌูุฏ ฺฉุงู ุฏุฑ ุญุฏุงูู ฺฉ ุงูุจุงุฑ ูุจุฏุง ุฏุงุดุชู ุจุงุดูุฏ

4. **ุฏุฑ ุตูุฑุช ูุจูุฏ ููุฌูุฏ:**
   - ุญูุงูู ุงุฌุงุฏ **ูุดูุฏ**
   - ุฎุทุง ุฏุงุฏู ุดูุฏ: **"ููุฌูุฏ ุงูุจุงุฑ ุจุฑุง ุซุจุช ุญูุงูู ฺฉุงูุง [ูุงู ฺฉุงูุง] ฺฉู ุงุณุช"**
   - ุจุงุฏ ูุดุฎุต ุดูุฏ ฺฉู ฺฉุฏุงู ฺฉุงูุง ููุฌูุฏ ฺฉุงู ูุฏุงุฑุฏ
   - ุจุงุฏ ูุดุฎุต ุดูุฏ ฺฉู ฺฉุฏุงู ุงูุจุงุฑ ููุฌูุฏ ฺฉุงู ูุฏุงุฑุฏ (ุฏุฑ ุตูุฑุช ูุฌูุฏ ฺูุฏ ุงูุจุงุฑ ูุจุฏุง)

### ุณุงุฎุชุงุฑ ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง

- **ููุน ุณูุฏ:** `IssueWarehouseTransfer` (ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง)
- **ูุฏู:** `inventory.models.IssueWarehouseTransfer`
- **ูุฏู ุงููุงู:** `inventory.models.IssueWarehouseTransferLine`
- **ุจุฑุง ูุฑ ุณูุฏ ุงูุชูุงู ุจู ูพุง ฺฉุงุฑ:** ฺฉ ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง
- **ุจุฑุง ูุฑ ฺฉุงูุง ุฏุฑ ุณูุฏ:**
  - ุงูุจุงุฑ ูุจุฏุง (`source_warehouse`): ุงุฒ `source_warehouses` ุจุง ุงูููุช (ุงููู ุงูุจุงุฑ ฺฉู ููุฌูุฏ ฺฉุงู ุฏุงุฑุฏ)
  - ุงูุจุงุฑ ููุตุฏ (`destination_warehouse`): `operation.work_line.warehouse`
  - ฺฉุงูุง (`item`): ุงุฒ `TransferToLineItem.material_item`
  - ููุฏุงุฑ (`quantity`): `quantity_required` ุงุฒ `TransferToLineItem`
  - ูุงุญุฏ (`unit`): ุงุฒ `TransferToLineItem.unit`

### ููุฏูุง ูุฏู IssueWarehouseTransferLine

- `document`: ForeignKey ุจู `IssueWarehouseTransfer`
- `item`: ForeignKey ุจู `inventory.Item`
- `item_code`: ฺฉุฏ ฺฉุงูุง
- `source_warehouse`: ุงูุจุงุฑ ูุจุฏุง
- `source_warehouse_code`: ฺฉุฏ ุงูุจุงุฑ ูุจุฏุง
- `destination_warehouse`: ุงูุจุงุฑ ููุตุฏ
- `destination_warehouse_code`: ฺฉุฏ ุงูุจุงุฑ ููุตุฏ
- `warehouse`: ุจุฑุง ุณุงุฒฺฏุงุฑ ุจุง `IssueLineBase` (ุจุฑุงุจุฑ ุจุง `source_warehouse`)
- `warehouse_code`: ฺฉุฏ ุงูุจุงุฑ (ุจุฑุงุจุฑ ุจุง `source_warehouse_code`)
- `unit`: ูุงุญุฏ
- `quantity`: ููุฏุงุฑ
- `serials`: ุณุฑุงูโูุง (ManyToMany)

### ูฺฉุงุช ููู

1. ูุฑ ุณูุฏ ุงูุชูุงู ุจู ูพุง ฺฉุงุฑ = ฺฉ ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง
2. ุงูุชุฎุงุจ ุงูุจุงุฑ ูุจุฏุง ุจุฑ ุงุณุงุณ ุงูููุช (1ุ 2ุ 3...) ู ููุฌูุฏ
3. ุงฺฏุฑ ุญุช ฺฉ ฺฉุงูุง ููุฌูุฏ ฺฉุงู ูุฏุงุดุชู ุจุงุดุฏุ ฺฉู ุญูุงูู ุงุฌุงุฏ ููโุดูุฏ
4. ุงูุจุงุฑ ููุตุฏ ุงุฒ `work_line` ุนููุงุช ฺฏุฑูุชู ูโุดูุฏ

---

## ุจุฎุด ุณูู: ฺฉุงูุงูุง ุงุถุงู

### ูุงุฒููุฏ ฺฉู

ุฏุฑ ุจุฎุด "ฺฉุงูุงูุง ุงุถุงู" ูุฑู ุงูุชูุงู ุจู ูพุง ฺฉุงุฑุ ฺฉุงุฑุจุฑ ูโุชูุงูุฏ ฺฉุงูุงูุง ุฑุง ุงุถุงูู ฺฉูุฏ ฺฉู ุฏุฑ BOM ูุณุชูุฏ. ุงู ฺฉุงูุงูุง ุจุงุฏ ุจุฑ ุงุณุงุณ **ุฎุท ฺฉุงุฑ** (`WorkLine`) ฺฉู ุฏุฑ ูุฑ ุฎุท ุงูุชุฎุงุจ ูโุดูุฏุ ุฏุณุชูโุจูุฏ ุดููุฏ.

### ููุฏ ูุฑุจูุทู

- **ููุฏ:** `destination_work_center` ุฏุฑ `TransferToLineItem`
- **ุชูุถุญ:** ุงู ููุฏ ุจู `WorkLine` ุงุดุงุฑู ูโฺฉูุฏ (ูู `WorkCenter`)
- **ููุจุน ุงูุจุงุฑ ููุตุฏ:** ูุฑ `WorkLine` ุฏุงุฑุง ฺฉ `warehouse` ุงุณุช ฺฉู ุงูุจุงุฑ ููุตุฏ ุฑุง ูุดุฎุต ูโฺฉูุฏ

### ููุทู ุฏุณุชูโุจูุฏ

1. **ุจุฑุง ูุฑ ฺฉุงูุง ุงุถุงู:**
   - ฺฉุงุฑุจุฑ ฺฉ `WorkLine` ุงูุชุฎุงุจ ูโฺฉูุฏ (ุฏุฑ ููุฏ `destination_work_center`)
   - ุงู `WorkLine` ุงูุจุงุฑ ููุตุฏ ุฑุง ูุดุฎุต ูโฺฉูุฏ (`destination_work_center.warehouse`)

2. **ุฏุณุชูโุจูุฏ ุจุฑ ุงุณุงุณ `WorkLine`:**
   - ููู ฺฉุงูุงูุง ุงุถุงู ฺฉู `WorkLine` ฺฉุณุงู ุฏุงุฑูุฏุ ุฏุฑ ฺฉ ฺฏุฑูู ูุฑุงุฑ ูโฺฏุฑูุฏ
   - ุจุฑุง ูุฑ `WorkLine` ููุญุตุฑ ุจู ูุฑุฏุ ฺฉ ุณูุฏ ุงูุชูุงู ุจู ูพุง ฺฉุงุฑ ุฌุฏุงฺฏุงูู ุงุฌุงุฏ ูโุดูุฏ

3. **ุงูฺฏูุฑุชู:**
   ```
   ุจุฑุง ููู ฺฉุงูุงูุง ุงุถุงู (is_extra=1):
     1. ฺฉุงูุงูุง ุฑุง ุจุฑ ุงุณุงุณ destination_work_center (ฺฉู WorkLine ุงุณุช) ฺฏุฑููโุจูุฏ ฺฉู
     2. ุจุฑุง ูุฑ ฺฏุฑูู (ูุฑ WorkLine):
        - ฺฉ ุณูุฏ ุงูุชูุงู ุจู ูพุง ฺฉุงุฑ ุงุฌุงุฏ ฺฉู
        - ููู ฺฉุงูุงูุง ุขู WorkLine ุฑุง ุจู ุงู ุณูุฏ ุงุถุงูู ฺฉู
     3. ุจุฑุง ูุฑ ุณูุฏ ุงูุชูุงู ุงุฌุงุฏ ุดุฏู:
        - ฺฉ ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง ุงุฌุงุฏ ฺฉู (ุจุง ููุทู ุจุฎุด ุฏูู)
   ```

### ุณุงุฎุชุงุฑ ุณูุฏ ุงูุชูุงู ุจุฑุง ฺฉุงูุงูุง ุงุถุงู

- **ุจุฑุง ูุฑ `WorkLine`:** ฺฉ ุณูุฏ ุงูุชูุงู ุจู ูพุง ฺฉุงุฑ (`TransferToLine`)
- **ุงูุจุงุฑ ููุตุฏ:** `work_line.warehouse` (ุงุฒ `WorkLine` ุงูุชุฎุงุจ ุดุฏู)
- **ุงููุงู:** ููุท ฺฉุงูุงูุง ฺฉู `is_extra=1` ู `destination_work_center` (WorkLine) ฺฉุณุงู ุฏุงุฑูุฏ

### ููุทู ุงุฌุงุฏ ุญูุงูู

ุจุฑุง ูุฑ ุณูุฏ ุงูุชูุงู ฺฉุงูุงูุง ุงุถุงูุ ฺฉ ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง ุงุฌุงุฏ ูโุดูุฏ ุจุง ุงู ุชูุงูุช ฺฉู:

1. **ุงูุจุงุฑ ูุจุฏุง:** ุงุฒ `source_warehouse` ููุฏ ฺฉุงูุง (ฺฉู ฺฉุงุฑุจุฑ ุฏุฑ ูุฑู ุงูุชุฎุงุจ ฺฉุฑุฏู)
2. **ุงูุจุงุฑ ููุตุฏ:** `destination_work_center.warehouse` (ุงุฒ `WorkLine` ุงูุชุฎุงุจ ุดุฏู)
3. **ฺฺฉ ููุฌูุฏ:** ุจุงุฏ ููุฌูุฏ ฺฉุงู ุฏุฑ `source_warehouse` ุจุงุดุฏ
   - ุงุณุชูุงุฏู ุงุฒ `inventory.inventory_balance.calculate_item_balance()`
   - ููุงุณู: `current_balance >= quantity_required`
4. **ุฏุฑ ุตูุฑุช ูุจูุฏ ููุฌูุฏ:**
   - ุญูุงูู ุงุฌุงุฏ **ูุดูุฏ**
   - ุฎุทุง ุฏุงุฏู ุดูุฏ: **"ููุฌูุฏ ุงูุจุงุฑ ุจุฑุง ุซุจุช ุญูุงูู ฺฉุงูุง [ูุงู ฺฉุงูุง] ฺฉู ุงุณุช"**

### ูฺฉุงุช ููู

1. ฺฉุงูุงูุง ุงุถุงู (`is_extra=1`) ุงุฒ ฺฉุงูุงูุง BOM (`is_extra=0`) ุฌุฏุง ูุณุชูุฏ
2. ฺฉุงูุงูุง ุงุถุงู ุจุฑ ุงุณุงุณ `WorkLine` (ููุฏ `destination_work_center`) ุฏุณุชูโุจูุฏ ูโุดููุฏ
3. ุจุฑุง ูุฑ `WorkLine` ฺฉ ุณูุฏ ุงูุชูุงู ุฌุฏุงฺฏุงูู
4. ูุฑ ุณูุฏ ุงูุชูุงู ฺฉุงูุงูุง ุงุถุงู = ฺฉ ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง
5. ุงูุจุงุฑ ููุตุฏ ุงุฒ `destination_work_center.warehouse` ฺฏุฑูุชู ูโุดูุฏ
6. ุงูุจุงุฑ ูุจุฏุง ุงุฒ `source_warehouse` ููุฏ ฺฉุงูุง ุงุถุงู ฺฏุฑูุชู ูโุดูุฏ (ฺฉู ฺฉุงุฑุจุฑ ุงูุชุฎุงุจ ฺฉุฑุฏู)

---

## ูุงูโูุง ูุฑุจูุทู

### Forms
- `production/forms/transfer_to_line.py`
  - `TransferToLineForm`: ูุฑู ุงุตู ุจุง ููุฏูุง `transfer_type` ู `selected_operations`
  - `TransferToLineItemForm`: ูุฑู ุงููุงู ุงุถุงู

### Views
- `production/views/transfer_to_line.py`
  - `TransferToLineCreateView`: ุงุฌุงุฏ ุณูุฏ ุงูุชูุงู (ุจุงุฏ ุชุบุฑ ฺฉูุฏ)
  - `TransferToLineUpdateView`: ูุฑุงุด ุณูุฏ ุงูุชูุงู

### Templates
- `templates/production/transfer_to_line_form.html`
  - ุจุฎุด ุงูุชุฎุงุจ ููุน ุงูุชูุงู (ุฎุทูุท 117-162)
  - ุจุฎุด ฺฉุงูุงูุง ุงุถุงู (ุฎุทูุท 213-324)

### Models
- `production/models.py`
  - `TransferToLine`: ุณูุฏ ุงุตู ุงูุชูุงู
  - `TransferToLineItem`: ุงููุงู ูุฑ ุณูุฏ ุงูุชูุงู
  - `ProcessOperation`: ุนููุงุช ูุฑุงูุฏ (ุฏุงุฑุง `work_line`)
  - `WorkLine`: ุฎุท ฺฉุงุฑ (ุฏุงุฑุง `warehouse`)
  - `BOMMaterial`: ููุงุฏ BOM (ุฏุงุฑุง `source_warehouses` JSONField)

- `inventory/models.py`
  - `IssueWarehouseTransfer`: ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง (ุณูุฏ ุงุตู)
  - `IssueWarehouseTransferLine`: ุงููุงู ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง

---

## ูฺฉุงุช ููู - ุจุฎุด ุงูู

1. ูุฑ ุนููุงุช = ฺฉ ุณูุฏ ุงูุชูุงู ุฌุฏุงฺฏุงูู
2. ูุฑ ุณูุฏ ุงูุชูุงู ููุท ุดุงูู ููุงุฏ ููุงู ุนููุงุช ุงุณุช
3. ุฏุฑ ุญุงูุช `full`ุ ููู ุนููุงุช ุจุงุฏ ุฎูุฏฺฉุงุฑ ุดูุงุณุง ุดููุฏ
4. ุฏุฑ ุญุงูุช `operations`ุ ููุท ุนููุงุชโูุง ุงูุชุฎุงุจ ุจุงุฏ ุงุณุชูุงุฏู ุดููุฏ

## ูฺฉุงุช ููู - ุจุฎุด ุฏูู

1. ูุฑ ุณูุฏ ุงูุชูุงู ุจู ูพุง ฺฉุงุฑ = ฺฉ ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง
2. ุงูุชุฎุงุจ ุงูุจุงุฑ ูุจุฏุง ุจุฑ ุงุณุงุณ ุงูููุช (1ุ 2ุ 3...) ู ููุฌูุฏ
3. ุงฺฏุฑ ุญุช ฺฉ ฺฉุงูุง ููุฌูุฏ ฺฉุงู ูุฏุงุดุชู ุจุงุดุฏุ ฺฉู ุญูุงูู ุงุฌุงุฏ ููโุดูุฏ
4. ุงูุจุงุฑ ููุตุฏ ุงุฒ `work_line` ุนููุงุช ฺฏุฑูุชู ูโุดูุฏ

---

## ูุถุนุช ูพุงุฏูโุณุงุฒ

### ุจุฎุด ุงูู: ุงุฌุงุฏ ฺูุฏู ุณูุฏ ุงูุชูุงู
- [x] ุจุฑุฑุณ ฺฉุงูู ฺฉุฏ ูุนู
- [x] ุทุฑุงุญ ููุทู ุฌุฏุฏ ุงุฌุงุฏ ฺูุฏู ุณูุฏ (ฺฉ ุณูุฏ ุจุฑุง ูุฑ ุนููุงุช)
- [x] ูพุงุฏูโุณุงุฒ ุชุบุฑุงุช ุฏุฑ View (`TransferToLineCreateView`)
- [x] ุจุฑุฑุณ ู ุชุบุฑุงุช ุฏุฑ Form (ุฏุฑ ุตูุฑุช ูุงุฒ)
- [ ] ุชุณุช ุชุบุฑุงุช

**ูุถุนุช:** โ ูพุงุฏูโุณุงุฒ ุดุฏู
- ุฏุฑ `TransferToLineCreateView.form_valid()` (ุฎุทูุท 182-291)
- ุจุฑุง ูุฑ ุนููุงุช ฺฉ ุณูุฏ ุงูุชูุงู ุฌุฏุงฺฏุงูู ุงุฌุงุฏ ูโุดูุฏ
- ุฏุฑ ุญุงูุช `full`: ููู ุนููุงุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุดูุงุณุง ูโุดููุฏ
- ุฏุฑ ุญุงูุช `operations`: ููุท ุนููุงุชโูุง ุงูุชุฎุงุจ ุงุณุชูุงุฏู ูโุดููุฏ

### ุจุฎุด ุฏูู: ุงุฌุงุฏ ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง
- [x] ุจุฑุฑุณ ูุฏู `IssueWarehouseTransfer` ู `IssueWarehouseTransferLine`
- [x] ุจุฑุฑุณ ูุญูู ูุญุงุณุจู ููุฌูุฏ ุงูุจุงุฑ
- [x] ุทุฑุงุญ ููุทู ุงูุชุฎุงุจ ุงูุจุงุฑ ูุจุฏุง ุจุฑ ุงุณุงุณ ุงูููุช ู ููุฌูุฏ
- [x] ุทุฑุงุญ ููุทู ฺฺฉ ฺฉุฑุฏู ููุฌูุฏ ุจุฑุง ููู ฺฉุงูุงูุง
- [x] ูพุงุฏูโุณุงุฒ ุงุฌุงุฏ ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง
- [x] ูุฏุฑุช ุฎุทุงูุง ุฏุฑ ุตูุฑุช ูุจูุฏ ููุฌูุฏ
- [ ] ุชุณุช ุชุบุฑุงุช

**ูุถุนุช:** โ ูพุงุฏูโุณุงุฒ ุดุฏู
- ุชุงุจุน `create_warehouse_transfer_for_transfer_to_line()` ุฏุฑ `production/utils/transfer.py` (ุฎุทูุท 288-497)
- ุชุงุจุน `select_source_warehouse_by_priority()` ุจุฑุง ุงูุชุฎุงุจ ุงูุจุงุฑ ุจุฑ ุงุณุงุณ ุงูููุช ู ููุฌูุฏ (ุฎุทูุท 216-285)
- ฺฺฉ ููุฌูุฏ ุจุฑุง ููู ฺฉุงูุงูุง ูุจู ุงุฒ ุงุฌุงุฏ ุญูุงูู
- ูุฏุฑุช ุฎุทุงูุง ู ูพุงูโูุง ููุงุณุจ ุฏุฑ ุตูุฑุช ูุจูุฏ ููุฌูุฏ

### ุจุฎุด ุณูู: ฺฉุงูุงูุง ุงุถุงู
- [x] ุจุฑุฑุณ ููุทู ุฏุณุชูโุจูุฏ ฺฉุงูุงูุง ุงุถุงู ุจุฑ ุงุณุงุณ `WorkLine`
- [x] ุทุฑุงุญ ููุทู ุงุฌุงุฏ ฺูุฏู ุณูุฏ ุงูุชูุงู ุจุฑุง ฺฉุงูุงูุง ุงุถุงู (ฺฉ ุณูุฏ ุจุฑุง ูุฑ `WorkLine`)
- [x] ูพุงุฏูโุณุงุฒ ุฏุณุชูโุจูุฏ ู ุงุฌุงุฏ ุณูุฏูุง ุงูุชูุงู
- [x] ูพุงุฏูโุณุงุฒ ุงุฌุงุฏ ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง ุจุฑุง ฺฉุงูุงูุง ุงุถุงู
- [x] ฺฺฉ ููุฌูุฏ ุจุฑุง ฺฉุงูุงูุง ุงุถุงู (ุงุฒ `source_warehouse`)
- [ ] ุชุณุช ุชุบุฑุงุช

**ูุถุนุช:** โ ูพุงุฏูโุณุงุฒ ุดุฏู
- ุฏุฑ `TransferToLineCreateView.form_valid()` (ุฎุทูุท 293-366)
- ฺฉุงูุงูุง ุงุถุงู ุจุฑ ุงุณุงุณ `destination_work_center` (WorkLine) ุฏุณุชูโุจูุฏ ูโุดููุฏ
- ุจุฑุง ูุฑ WorkLine ฺฉ ุณูุฏ ุงูุชูุงู ุฌุฏุงฺฏุงูู ุงุฌุงุฏ ูโุดูุฏ
- ููุทู ุงุฌุงุฏ ุญูุงูู ุจุฑุง ฺฉุงูุงูุง ุงุถุงู ุฏุฑ ุชุงุจุน `create_warehouse_transfer_for_transfer_to_line()` (ุฎุทูุท 366-446)
- ฺฺฉ ููุฌูุฏ ุงุฒ `source_warehouse` ุจุฑุง ฺฉุงูุงูุง ุงุถุงู

### ุจุฎุด ฺูุงุฑู: ุฒูุงู ุงุฌุงุฏ ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง
- [x] ุจุฑุฑุณ workflow ุชุงุฏ ุฏุฑุฎูุงุณุชโูุง (`TransferToLineApproveView` ู `TransferToLineQCApproveView`)
- [x] ุทุฑุงุญ ููุทู ุงุฌุงุฏ ุญูุงูู ุจุนุฏ ุงุฒ ุชุงุฏูุง
- [x] ูพุงุฏูโุณุงุฒ ุงุฌุงุฏ ุญูุงูู ุจุฑุง ุฏุฑุฎูุงุณุช ูุนููู (ุจุนุฏ ุงุฒ ุชุงุฏ `approved_by`)
- [x] ูพุงุฏูโุณุงุฒ ุงุฌุงุฏ ุญูุงูู ุจุฑุง ุฌุงฺฏุฒู ุถุงุนุงุช (ุจุนุฏ ุงุฒ ุชุงุฏ QC)
- [ ] ุชุณุช ุชุบุฑุงุช

**ูุถุนุช:** โ ูพุงุฏูโุณุงุฒ ุดุฏู
- ุฏุฑ `TransferToLineApproveView.post()` (ุฎุทูุท 676-706): ุงุฌุงุฏ ุญูุงูู ุจุนุฏ ุงุฒ ุชุงุฏ ูุนููู
- ุฏุฑ `TransferToLineQCApproveView.post()` (ุฎุทูุท 855-885): ุงุฌุงุฏ ุญูุงูู ุจุนุฏ ุงุฒ ุชุงุฏ QC
- ุญูุงูู ููุท ุจุนุฏ ุงุฒ lock ุดุฏู ุณูุฏ (`is_locked = 1`) ุงุฌุงุฏ ูโุดูุฏ
- ุจุฑุง scrap replacementุ ุญูุงูู ููุท ุจุนุฏ ุงุฒ ุชุงุฏ QC ุงุฌุงุฏ ูโุดูุฏ

---

## ุจุฎุด ฺูุงุฑู: ุฒูุงู ุงุฌุงุฏ ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง

### ูุงุฒููุฏ ฺฉู

ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง ุจุงุฏ **ุจุนุฏ ุงุฒ ุชุงุฏูุง** ุงุฌุงุฏ ุดูุฏุ ูู ููฺฏุงู ุงุฌุงุฏ ุฏุฑุฎูุงุณุช ุงูุชูุงู ุจู ูพุง ฺฉุงุฑ.

### ุจุฑุง ุฏุฑุฎูุงุณุช ูุนููู (non-scrap)

**ุฒูุงู ุงุฌุงุฏ ุญูุงูู:**
- ุจุนุฏ ุงุฒ ุชุงุฏ ุชุงุฏ ฺฉููุฏู (`approved_by`)
- ููุช ฺฉู `status = APPROVED` ู `is_locked = 1` ุดุฏ
- ุฏุฑ ุงูุฌุง ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง ุงุฌุงุฏ ุดูุฏ

**ูฺฉุงู ูพุงุฏูโุณุงุฒ:**
- ุฏุฑ view `TransferToLineApproveView`
- ุจุนุฏ ุงุฒ lock ฺฉุฑุฏู ุณูุฏ ุงูุชูุงู
- ูุจู ุง ุจุนุฏ ุงุฒ ุงุฌุงุฏ Consumption Issue

### ุจุฑุง ุฌุงฺฏุฒู ุถุงุนุงุช (scrap replacement)

**ุฒูุงู ุงุฌุงุฏ ุญูุงูู:**
- ุจุนุฏ ุงุฒ ุชุงุฏ ุชุงุฏ ฺฉููุฏู (`approved_by`) โ `status = PENDING_QC_APPROVAL`
- ุจุนุฏ ุงุฒ ุชุงุฏ QC (`qc_approved_by`) โ `qc_status = APPROVED`, `status = APPROVED`, `is_locked = 1`
- ุฏุฑ ุงูุฌุง ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง ุงุฌุงุฏ ุดูุฏ

**ูฺฉุงู ูพุงุฏูโุณุงุฒ:**
- ุฏุฑ view `TransferToLineQCApproveView`
- ุจุนุฏ ุงุฒ lock ฺฉุฑุฏู ุณูุฏ ุงูุชูุงู
- ูุจู ุง ุจุนุฏ ุงุฒ ุงุฌุงุฏ Consumption Issue

### ูฺฉุงุช ููู

1. ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง **ูุจุงุฏ** ููฺฏุงู ุงุฌุงุฏ ุฏุฑุฎูุงุณุช (`TransferToLineCreateView`) ุงุฌุงุฏ ุดูุฏ
2. ุญูุงูู ุจุงุฏ **ุจุนุฏ ุงุฒ ุชุงุฏูุง** ู **ุจุนุฏ ุงุฒ lock ุดุฏู** ุณูุฏ ุงุฌุงุฏ ุดูุฏ
3. ุจุฑุง scrap replacementุ ุญูุงูู ุจุงุฏ **ุจุนุฏ ุงุฒ ุชุงุฏ QC** ุงุฌุงุฏ ุดูุฏ
4. ููุทู ุงุฌุงุฏ ุญูุงูู ุจุงุฏ ุจุง ููุทู ุจุฎุด ุฏูู (ุงูุชุฎุงุจ ุงูุจุงุฑ ูุจุฏุง ุจุฑ ุงุณุงุณ ุงูููุชุ ฺฺฉ ููุฌูุฏุ ู...) ุงูุฌุงู ุดูุฏ

---

## ุฎูุงุตู ูุถุนุช ูพุงุฏูโุณุงุฒ

### โ ุชฺฉูู ุดุฏู

1. **ุจุฎุด ุงูู - ุงุฌุงุฏ ฺูุฏู ุณูุฏ ุงูุชูุงู:**
   - ุจุฑุง ูุฑ ุนููุงุช ฺฉ ุณูุฏ ุงูุชูุงู ุฌุฏุงฺฏุงูู ุงุฌุงุฏ ูโุดูุฏ
   - ูพุดุชุจุงู ุงุฒ ุญุงูุช `full` (ููู ุนููุงุช) ู `operations` (ุนููุงุช ุงูุชุฎุงุจ)
   - ูพุงุฏูโุณุงุฒ ุฏุฑ `TransferToLineCreateView.form_valid()`

2. **ุจุฎุด ุฏูู - ุงุฌุงุฏ ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง:**
   - ุชุงุจุน `create_warehouse_transfer_for_transfer_to_line()` ูพุงุฏูโุณุงุฒ ุดุฏู
   - ุงูุชุฎุงุจ ุงูุจุงุฑ ูุจุฏุง ุจุฑ ุงุณุงุณ ุงูููุช ู ููุฌูุฏ
   - ฺฺฉ ููุฌูุฏ ุจุฑุง ููู ฺฉุงูุงูุง ูุจู ุงุฒ ุงุฌุงุฏ ุญูุงูู
   - ูุฏุฑุช ุฎุทุงูุง ู ูพุงูโูุง ููุงุณุจ

3. **ุจุฎุด ุณูู - ฺฉุงูุงูุง ุงุถุงู:**
   - ุฏุณุชูโุจูุฏ ฺฉุงูุงูุง ุงุถุงู ุจุฑ ุงุณุงุณ `WorkLine`
   - ุงุฌุงุฏ ุณูุฏ ุงูุชูุงู ุฌุฏุงฺฏุงูู ุจุฑุง ูุฑ `WorkLine`
   - ฺฺฉ ููุฌูุฏ ุงุฒ `source_warehouse` ุจุฑุง ฺฉุงูุงูุง ุงุถุงู

4. **ุจุฎุด ฺูุงุฑู - ุฒูุงู ุงุฌุงุฏ ุญูุงูู:**
   - ุงุฌุงุฏ ุญูุงูู ุจุนุฏ ุงุฒ ุชุงุฏ ูุนููู (`TransferToLineApproveView`)
   - ุงุฌุงุฏ ุญูุงูู ุจุนุฏ ุงุฒ ุชุงุฏ QC ุจุฑุง scrap replacement (`TransferToLineQCApproveView`)
   - ุญูุงูู ููุท ุจุนุฏ ุงุฒ lock ุดุฏู ุณูุฏ ุงุฌุงุฏ ูโุดูุฏ

### โณ ุจุงูโูุงูุฏู

- **ุชุณุช ุชุบุฑุงุช:** ูุงุฒ ุจู ุชุณุช ฺฉุงูู ุชูุงู ุจุฎุดโูุง ุฏุงุฑุฏ
  - ุชุณุช ุงุฌุงุฏ ฺูุฏู ุณูุฏ ุงูุชูุงู ุจุฑุง ุนููุงุชโูุง ูุฎุชูู
  - ุชุณุช ุงุฌุงุฏ ุญูุงูู ุงูุชูุงู ุจู ุงูุจุงุฑูุง ุจุง ููุฌูุฏ ฺฉุงู ู ูุงฺฉุงู
  - ุชุณุช ฺฉุงูุงูุง ุงุถุงู ู ุฏุณุชูโุจูุฏ ุจุฑ ุงุณุงุณ WorkLine
  - ุชุณุช workflow ุชุงุฏ ู ุงุฌุงุฏ ุญูุงูู ุฏุฑ ุฒูุงู ููุงุณุจ

### ๐ ูุงูโูุง ุชุบุฑ ุงูุชู

- `production/views/transfer_to_line.py`: ูพุงุฏูโุณุงุฒ ุงุฌุงุฏ ฺูุฏู ุณูุฏ ู ูุฑุงุฎูุงู ุงุฌุงุฏ ุญูุงูู
- `production/utils/transfer.py`: ุชูุงุจุน ฺฉูฺฉ ุจุฑุง ุงูุชุฎุงุจ ุงูุจุงุฑ ู ุงุฌุงุฏ ุญูุงูู
- `production/forms/transfer_to_line.py`: ูุฏุฑุช ููุฏ `is_scrap_replacement` (hidden input)
- `templates/production/transfer_to_line_form.html`: ุงุถุงูู ฺฉุฑุฏู hidden input ุจุฑุง checkbox

---

**ูฺฉุชู:** ูพุงุฏูโุณุงุฒ ฺฉุงูู ุดุฏู ุงุณุช ู ุขูุงุฏู ุชุณุช ูโุจุงุดุฏ.

