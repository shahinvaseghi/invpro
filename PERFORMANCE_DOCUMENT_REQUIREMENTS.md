# الزامات سند عملکرد

## ساختار کلی

### انواع سند عملکرد
1. **سند عملکرد کلی** - برای کل سفارش
2. **سند عملکرد عملیاتی** - برای هر عملیات به صورت جداگانه

## فیلدهای فرم

### اولین فیلد در فرم
- انتخاب نوع سند: **کلی** یا **عملیاتی**

## جریان کار برای سند عملکرد عملیاتی

1. انتخاب نوع سند: **عملیاتی**
2. انتخاب **سفارش**
3. نمایش لیست **عملیات‌های فرایند** آن سفارش
   - فقط عملیات‌هایی که **هنوز سند عملکرد ندارند** نمایش داده می‌شوند
4. ثبت سند عملکرد برای هر عملیات به صورت **جداگانه**

### فیلدهای سند عملکرد عملیاتی

برای هر عملیات باید بتوان:
- **لیست متریال حقیقی استفاده شده در آن عملیات** را نمایش داد
  - **منبع داده:** کالاهایی که برای آنها **حواله انتقال انبار** خورده و مربوط به این سفارش هستند
  - **نکته مهم:** در BOM ممکن است کالای جایگزین تعریف شده باشد
    - هنگام صدور سند حواله بین انبار برای این سفارش، ممکن است:
      - کالای اصلی موجود نباشد و به جای آن **کالای جایگزین** حواله بخورد
      - یا **ترکیبی از کالای اصلی و کالای جایگزین** حواله بخورند
  - **متریال حقیقی استفاده شده = کالاهایی که برای آنها حواله انتقال انبار خورده و مربوط به این سفارش هستند**
  - کاربر باید بتواند **جلوی هر کدوم از متریال‌ها، مقدار ضایعات** را تعیین کند
- **ماشین ساعت حقیقی فرایند** را ثبت کرد
- **نفر ساعت حقیقی فرایند** را ثبت کرد

**نکته:** تعداد برنامه‌ریزی شده و تعداد حقیقی تولید شده در سند عملکرد عملیاتی **نیازی نیست** (این فیلدها فقط مربوط به سند عملکرد کلی هستند)

## جریان کار برای سند عملکرد کلی

1. انتخاب نوع سند: **کلی**
2. انتخاب **سفارش**
3. **شرط:** فقط بعد از اینکه برای **همه عملیات‌های** یک سفارش سند عملکرد ثبت شده باشد، می‌توان سند عملکرد کلی ثبت کرد

### فیلدهای سند عملکرد کلی

سند عملکرد کلی باید شامل:
- **جمع تمام نفر ساعت‌ها** (از تمام سندهای عملیاتی)
- **جمع تمام ماشین ساعت‌ها** (از تمام سندهای عملیاتی)
- **جمع تمام متریالی که در تولید استفاده شده** (از تمام سندهای عملیاتی)
- **تعداد برنامه‌ریزی شده (مورد انتظار)** (از سفارش خوانده می‌شود)
- **تعداد حقیقی تولید شده**

## قوانین و محدودیت‌ها

### سند عملکرد کلی
- ✅ فقط **یک بار** برای هر سفارش قابل ثبت است

### سند عملکرد عملیاتی
- ✅ برای هر عملیات فقط **یک بار** برای هر سفارش قابل ثبت است


